"use strict";angular.module("cyViewerApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cyViewerApp").controller("MainCtrl",["$scope","$http","Network","VisualStyles",function(a,b,c,d){function e(){var b=angular.element("#network");b.on("dragenter",function(a){a.stopPropagation(),a.preventDefault()}),b.on("dragover",function(a){a.stopPropagation(),a.preventDefault()}),b.on("drop",function(b){b.preventDefault();var c=b.originalEvent.dataTransfer.files,d=c[0],e=new FileReader;e.onload=function(b){var c=JSON.parse(b.target.result),d=c.data.name;void 0===d&&(d="Unknown"),a.$apply(function(){a.networks[d]=c,a.networkNames.push(d),a.currentNetwork=d,console.log(a.networkNames)}),a.cy.load(c.elements)},e.readAsText(d)})}function f(){a.nodes=n.elements.nodes,h();var b=n.data.name;a.currentNetwork=n.data.name,a.networks[b]=n,a.networkNames.push(b)}function g(){a.selectedNodes={},a.selectedEdges={},a.cy.on("select","node",function(b){var c=b.cyTarget.id();a.$apply(function(){a.selectedNodes[c]=b.cyTarget})}),a.cy.on("select","edge",function(b){var c=b.cyTarget.id();a.$apply(function(){a.selectedEdges[c]=b.cyTarget})}),a.cy.on("unselect","node",function(b){var c=b.cyTarget.id();a.$apply(function(){delete a.selectedNodes[c]})}),a.cy.on("unselect","edge",function(b){var c=b.cyTarget.id();a.$apply(function(){delete a.selectedEdges[c]})})}function h(){for(var b=[],c=0;c<m.length;c++){var d=m[c],e=d.title;b[c]=e,a.visualStyles[e]=d,a.styleNames[c]=e}}var i="gal.cyjs",j="galVS.json",k="default";a.networks={},a.visualStyles={},a.styleNames=[],a.networkNames=[],a.currentVS=k,console.log("Network rendering start...");var l={showOverlay:!1,minZoom:.01,maxZoom:200,layout:{name:"preset"},ready:function(){a.cy=this,a.cy.load(n.elements),a.cy.style().fromJson(a.visualStyles[k].style).update(),e(),g()}};a.switchNetwork=function(b){a.currentNetwork=b;var c=a.networks[b];a.cy.load(c.elements)},a.switchVS=function(b){a.cy.style().fromJson(a.visualStyles[b].style).update(),a.currentVS=b};var m=d.query({filename:j}),n=c.get({filename:i},function(){angular.element("#network").cytoscape(l),f(),console.log("Network Data: "),console.log(n),console.log("VS Data: "),console.log(m)})}]),angular.module("cyViewerApp").factory("Network",["$resource",function(a){return a("data/:filename",{filename:"@filename"})}]),angular.module("cyViewerApp").factory("VisualStyles",["$resource",function(a){return a("data/:filename",{filename:"@filename"})}]);